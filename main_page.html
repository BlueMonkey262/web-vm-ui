<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>VM Manager</title>
<link rel="stylesheet" href="main_page.css" />
<!-- Auth0 SDK -->
<script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
<script src="auth-config.js"></script>
<script src="vmDropDown.js"></script>
</head>
<body>

<h1 id="title">VM Manager</h1>
<div id="user-info" style="position: absolute; top: 10px; right: 10px; display: none;">
    <span id="user-email"></span>
    <button onclick="logout()" style="margin-left: 10px;">Logout</button>
</div>
<div id="vm-list" class="vm-container">Loading VMs...</div>

<div id="confirm-overlay" class="hidden">
    <div class="confirm-modal">
        <p>Are you sure you want to Force Off this VM?</p>
        <button id="confirm-yes">Yes, Force Off</button>
        <button id="confirm-no">Cancel</button>
    </div>
</div>



<script>
// Protect this page with authentication
(async function() {
    const authenticated = await requireAuth();
    if (authenticated) {
        // Show user info
        const user = await getUserInfo();
        if (user) {
            document.getElementById('user-email').textContent = user.email || user.name;
            document.getElementById('user-info').style.display = 'block';
        }
    }
})();
</script>
<script src="main_page.js"></script>
</body>
</html>